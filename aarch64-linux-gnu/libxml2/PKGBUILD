# Maintainer: [NAME] <some@email.com>

_target=aarch64-linux-gnu

_pkgname=libxml2
pkgname=$_target-$_pkgname
pkgver=2.9.10
pkgrel=1
pkgdec='XML parsing library, version 2'
arch=(x86_64)
url='http://www.xmlsoft.org/'
licenses=(MIT)
depends=($_target-glibc $_target-icu $_target-xz $_target-zlib)
makedepends=()
options=(!strip staticlibs !buildflags)
source=(
  https://gitlab.gnome.org/GNOME/$_pkgname/-/archive/v$pkgver/libxml2-v$pkgver.tar.gz
)
sha256sums=(
  'f07dab13bf42d2b8db80620cce7419b3b87827cc937c8bb20fe13b8571ee9501'
)

_srcdir=$_pkgname-v$pkgver

prepare() {
  cd $_srcdir

  NOCONFIGURE=1 ./autogen.sh
}

build() {
  cd $_srcdir

  mkdir -p build-$_target && pushd build-$_target
  $_target-configure \
    --without-python
  make
  popd
}

package() {
  cd $_srcdir

  pushd build-$_target
  make install DESTDIR="${pkgdir}"
  popd
}
